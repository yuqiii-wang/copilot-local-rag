Title: API Reference: Margin Service
Space: Engineering / API Docs
Author: Backend Team
Last Updated: 2023-11-10

# MarginService

The `MarginService` calculates the capital requirements for a given portfolio.

## Class: `com.trading.dummy.service.MarginService`

### `calculateMargin(Portfolio, Pricer)`
 Calculates the total Initial and Maintenance margin for all open positions.

**Parameters:**
*   `portfolio`: The user's portfolio object containing all positions.
*   `pricer`: The service interface to retrieve current asset prices.

**Returns:**
*   `MarginRequirement`: Object containing:
    *   `initialMargin` (double): Amount needed to open the positions.
    *   `maintenanceMargin` (double): Minimum amount needed to keep positions open.

## logic
```java
// Logic Snippet
if (security.getType() == SecurityType.EQUITY) {
    totalInitial += absValue * 0.50;
    totalMaintenance += absValue * 0.25;
}
```

*Note: Currently hardcoded for Equities. Bonds and Options logic coming in Release 2.0.*
